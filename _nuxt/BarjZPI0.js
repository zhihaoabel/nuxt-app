import{az as t,C as e,aI as a,E as n,aJ as l,av as o,aK as u,aL as r,aM as i,aN as s,aO as c,aP as v,o as d,a0 as p,aQ as f,J as m,a1 as y}from"./cnz0qvgB.js";function g(n={}){const{inheritAttrs:l=!0}=n,o=t(),u=e({setup:(t,{slots:e})=>()=>{o.value=e.default}}),r=e({inheritAttrs:l,props:n.props,setup:(t,{attrs:e,slots:a})=>()=>{var u;o.value;const r=null==(u=o.value)?void 0:u.call(o,{...null==n.props?h(e):t,$slots:a});return l&&1===(null==r?void 0:r.length)?r[0]:r}});return a({define:u,reuse:r},[u,r])}function h(t){const e={};for(const a in t)e[u(a)]=t[a];return e}const w=r?window:void 0,b=r?window.navigator:void 0;function x(...t){const e=[],a=()=>{e.forEach((t=>t())),e.length=0},l=n((()=>{const e=s(o(t[0])).filter((t=>null!=t));return e.every((t=>"string"!=typeof t))?e:void 0})),u=c((()=>{var e,a;return[null!=(a=null==(e=l.value)?void 0:e.map((t=>function(t){var e;const a=o(t);return null!=(e=null==a?void 0:a.$el)?e:a}(t))))?a:[w].filter((t=>null!=t)),s(o(l.value?t[1]:t[0])),s(m(l.value?t[2]:t[1])),o(l.value?t[3]:t[2])]}),(([t,n,l,o])=>{if(a(),!(null==t?void 0:t.length)||!(null==n?void 0:n.length)||!(null==l?void 0:l.length))return;const u=f(o)?{...o}:o;e.push(...t.flatMap((t=>n.flatMap((e=>l.map((a=>((t,e,a,n)=>(t.addEventListener(e,a,n),()=>t.removeEventListener(e,a,n)))(t,e,a,u))))))))}),{flush:"post"});return v(a),()=>{u(),a()}}function E(e){const a=function(){const e=t(!1),a=p();return a&&d((()=>{e.value=!0}),a),e}();return n((()=>(a.value,Boolean(e()))))}function S(e,a={}){const{controls:n=!1,navigator:l=b}=a,o=E((()=>l&&"permissions"in l)),u=t(),r="string"==typeof e?{name:e}:e,s=t(),c=()=>{var t,e;s.value=null!=(e=null==(t=u.value)?void 0:t.state)?e:"prompt"};x(u,"change",c,{passive:!0});const v=i((async()=>{if(o.value){if(!u.value)try{u.value=await l.permissions.query(r)}catch(t){u.value=void 0}finally{c()}return n?y(u.value):void 0}}));return v(),n?{state:s,isSupported:o,query:v}:s}function C(e={}){const{navigator:a=b,read:u=!1,source:r,copiedDuring:i=1500,legacy:s=!1}=e,c=E((()=>a&&"clipboard"in a)),v=S("clipboard-read"),d=S("clipboard-write"),p=n((()=>c.value||s)),f=t(""),m=t(!1),y=l((()=>m.value=!1),i,{immediate:!1});function g(t){return"granted"===t||"prompt"===t}return p.value&&u&&x(["copy","cut"],(async function(){let t=!(c.value&&g(v.value));if(!t)try{f.value=await a.clipboard.readText()}catch(o){t=!0}var e,n,l;t&&(f.value=null!=(l=null==(n=null==(e=null==document?void 0:document.getSelection)?void 0:e.call(document))?void 0:n.toString())?l:"")}),{passive:!0}),{isSupported:p,text:f,copied:m,copy:async function(t=o(r)){if(p.value&&null!=t){let n=!(c.value&&g(d.value));if(!n)try{await a.clipboard.writeText(t)}catch(e){n=!0}n&&function(t){const e=document.createElement("textarea");e.value=null!=t?t:"",e.style.position="absolute",e.style.opacity="0",document.body.appendChild(e),e.select(),document.execCommand("copy"),e.remove()}(t),f.value=t,m.value=!0,y.start()}}}}export{g as c,C as u};
