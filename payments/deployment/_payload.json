[{"data":1,"prerenderedAt":3615},["ShallowReactive",2],{"navigation":3,"/payments/deployment":36,"/payments/deployment-surround":3612},[4],{"title":5,"path":6,"stem":7,"children":8,"page":-1},"Payments","/payments","payments",[9,12,16,20,24,28,32],{"title":10,"path":6,"stem":11},"支付处理","payments/index",{"title":13,"path":14,"stem":15},"API 参考","/payments/api-reference","payments/api-reference",{"title":17,"path":18,"stem":19},"配置指南","/payments/configuration","payments/configuration",{"title":21,"path":22,"stem":23},"部署指南","/payments/deployment","payments/deployment",{"title":25,"path":26,"stem":27},"开发指南","/payments/development","payments/development",{"title":29,"path":30,"stem":31},"安装指南","/payments/installation","payments/installation",{"title":33,"path":34,"stem":35},"项目结构","/payments/project-structure","payments/project-structure",{"id":37,"title":21,"body":38,"description":3606,"extension":3607,"meta":3608,"navigation":167,"path":22,"seo":3610,"stem":23,"__hash__":3611},"payments/payments/deployment.md",{"type":39,"value":40,"toc":3570},"minimal",[41,45,49,53,57,60,138,141,203,206,210,215,234,241,426,430,462,466,473,555,559,562,578,582,589,771,778,981,985,1056,1060,1064,1190,1194,1197,1226,1233,1424,1427,1440,1443,1446,1450,1612,1616,1689,1692,1829,1832,1835,1839,1853,1923,1927,2144,2147,2302,2305,2309,2435,2438,2491,2494,2497,2634,2637,2781,2785,2789,3274,3277,3280,3284,3326,3330,3357,3361,3372,3412,3415,3531,3534,3566],[42,43,44],"h1",{"id":44},"部署指南2",[46,47,48],"p",{},"本指南将帮助您将应用部署到生产环境，包括各种部署平台的配置和最佳实践。",[50,51,52],"h2",{"id":52},"构建准备",[54,55,56],"h3",{"id":56},"环境变量配置",[46,58,59],{},"创建生产环境变量文件：",[61,62,67],"pre",{"className":63,"code":64,"language":65,"meta":66,"style":66},"language-bash shiki shiki-themes slack-ochin slack-ochin slack-dark","# .env.production\nNUXT_PUBLIC_SITE_URL=https://yoursite.com\nNUXT_PUBLIC_API_BASE=https://api.yoursite.com\nNUXT_UI_PRO_LICENSE=your-license-key\nNUXT_SECRET_KEY=your-secret-key\nDATABASE_URL=your-database-url\n","bash","",[68,69,70,79,94,105,116,127],"code",{"__ignoreMap":66},[71,72,75],"span",{"class":73,"line":74},"line",1,[71,76,78],{"class":77},"sfEkN","# .env.production\n",[71,80,82,86,90],{"class":73,"line":81},2,[71,83,85],{"class":84},"stY2G","NUXT_PUBLIC_SITE_URL",[71,87,89],{"class":88},"s4fzq","=",[71,91,93],{"class":92},"s3_3W","https://yoursite.com\n",[71,95,97,100,102],{"class":73,"line":96},3,[71,98,99],{"class":84},"NUXT_PUBLIC_API_BASE",[71,101,89],{"class":88},[71,103,104],{"class":92},"https://api.yoursite.com\n",[71,106,108,111,113],{"class":73,"line":107},4,[71,109,110],{"class":84},"NUXT_UI_PRO_LICENSE",[71,112,89],{"class":88},[71,114,115],{"class":92},"your-license-key\n",[71,117,119,122,124],{"class":73,"line":118},5,[71,120,121],{"class":84},"NUXT_SECRET_KEY",[71,123,89],{"class":88},[71,125,126],{"class":92},"your-secret-key\n",[71,128,130,133,135],{"class":73,"line":129},6,[71,131,132],{"class":84},"DATABASE_URL",[71,134,89],{"class":88},[71,136,137],{"class":92},"your-database-url\n",[54,139,140],{"id":140},"构建命令",[61,142,144],{"className":63,"code":143,"language":65,"meta":66,"style":66},"# 生产构建\nnpm run build\n\n# 静态站点生成\nnpm run generate\n\n# 预览构建结果\nnpm run preview\n",[68,145,146,151,163,169,174,183,187,193],{"__ignoreMap":66},[71,147,148],{"class":73,"line":74},[71,149,150],{"class":77},"# 生产构建\n",[71,152,153,157,160],{"class":73,"line":81},[71,154,156],{"class":155},"sIx0X","npm",[71,158,159],{"class":92}," run",[71,161,162],{"class":92}," build\n",[71,164,165],{"class":73,"line":96},[71,166,168],{"emptyLinePlaceholder":167},true,"\n",[71,170,171],{"class":73,"line":107},[71,172,173],{"class":77},"# 静态站点生成\n",[71,175,176,178,180],{"class":73,"line":118},[71,177,156],{"class":155},[71,179,159],{"class":92},[71,181,182],{"class":92}," generate\n",[71,184,185],{"class":73,"line":129},[71,186,168],{"emptyLinePlaceholder":167},[71,188,190],{"class":73,"line":189},7,[71,191,192],{"class":77},"# 预览构建结果\n",[71,194,196,198,200],{"class":73,"line":195},8,[71,197,156],{"class":155},[71,199,159],{"class":92},[71,201,202],{"class":92}," preview\n",[50,204,205],{"id":205},"部署平台",[54,207,209],{"id":208},"vercel-部署","Vercel 部署",[211,212,214],"h4",{"id":213},"_1-安装-vercel-cli","1. 安装 Vercel CLI",[61,216,218],{"className":63,"code":217,"language":65,"meta":66,"style":66},"npm i -g vercel\n",[68,219,220],{"__ignoreMap":66},[71,221,222,224,227,231],{"class":73,"line":74},[71,223,156],{"class":155},[71,225,226],{"class":92}," i",[71,228,230],{"class":229},"sKHZn"," -g",[71,232,233],{"class":92}," vercel\n",[211,235,237,238],{"id":236},"_2-配置-verceljson","2. 配置 ",[68,239,240],{},"vercel.json",[61,242,246],{"className":243,"code":244,"language":245,"meta":66,"style":66},"language-json shiki shiki-themes slack-ochin slack-ochin slack-dark","{\n  \"builds\": [\n    {\n      \"src\": \"nuxt.config.ts\",\n      \"use\": \"@nuxtjs/vercel-builder\"\n    }\n  ],\n  \"routes\": [\n    {\n      \"src\": \"/api/(.*)\",\n      \"dest\": \"/api/$1\"\n    },\n    {\n      \"src\": \"/(.*)\",\n      \"dest\": \"/\"\n    }\n  ],\n  \"env\": {\n    \"NUXT_PUBLIC_SITE_URL\": \"@nuxt_public_site_url\",\n    \"NUXT_PUBLIC_API_BASE\": \"@nuxt_public_api_base\"\n  }\n}\n","json",[68,247,248,254,263,268,283,293,298,303,310,315,327,338,344,349,361,371,376,381,390,403,414,420],{"__ignoreMap":66},[71,249,250],{"class":73,"line":74},[71,251,253],{"class":252},"sHMit","{\n",[71,255,256,260],{"class":73,"line":81},[71,257,259],{"class":258},"s4h4A","  \"builds\"",[71,261,262],{"class":252},": [\n",[71,264,265],{"class":73,"line":96},[71,266,267],{"class":252},"    {\n",[71,269,270,273,276,280],{"class":73,"line":107},[71,271,272],{"class":258},"      \"src\"",[71,274,275],{"class":252},": ",[71,277,279],{"class":278},"sZjll","\"nuxt.config.ts\"",[71,281,282],{"class":252},",\n",[71,284,285,288,290],{"class":73,"line":118},[71,286,287],{"class":258},"      \"use\"",[71,289,275],{"class":252},[71,291,292],{"class":278},"\"@nuxtjs/vercel-builder\"\n",[71,294,295],{"class":73,"line":129},[71,296,297],{"class":252},"    }\n",[71,299,300],{"class":73,"line":189},[71,301,302],{"class":252},"  ],\n",[71,304,305,308],{"class":73,"line":195},[71,306,307],{"class":258},"  \"routes\"",[71,309,262],{"class":252},[71,311,313],{"class":73,"line":312},9,[71,314,267],{"class":252},[71,316,318,320,322,325],{"class":73,"line":317},10,[71,319,272],{"class":258},[71,321,275],{"class":252},[71,323,324],{"class":278},"\"/api/(.*)\"",[71,326,282],{"class":252},[71,328,330,333,335],{"class":73,"line":329},11,[71,331,332],{"class":258},"      \"dest\"",[71,334,275],{"class":252},[71,336,337],{"class":278},"\"/api/$1\"\n",[71,339,341],{"class":73,"line":340},12,[71,342,343],{"class":252},"    },\n",[71,345,347],{"class":73,"line":346},13,[71,348,267],{"class":252},[71,350,352,354,356,359],{"class":73,"line":351},14,[71,353,272],{"class":258},[71,355,275],{"class":252},[71,357,358],{"class":278},"\"/(.*)\"",[71,360,282],{"class":252},[71,362,364,366,368],{"class":73,"line":363},15,[71,365,332],{"class":258},[71,367,275],{"class":252},[71,369,370],{"class":278},"\"/\"\n",[71,372,374],{"class":73,"line":373},16,[71,375,297],{"class":252},[71,377,379],{"class":73,"line":378},17,[71,380,302],{"class":252},[71,382,384,387],{"class":73,"line":383},18,[71,385,386],{"class":258},"  \"env\"",[71,388,389],{"class":252},": {\n",[71,391,393,396,398,401],{"class":73,"line":392},19,[71,394,395],{"class":258},"    \"NUXT_PUBLIC_SITE_URL\"",[71,397,275],{"class":252},[71,399,400],{"class":278},"\"@nuxt_public_site_url\"",[71,402,282],{"class":252},[71,404,406,409,411],{"class":73,"line":405},20,[71,407,408],{"class":258},"    \"NUXT_PUBLIC_API_BASE\"",[71,410,275],{"class":252},[71,412,413],{"class":278},"\"@nuxt_public_api_base\"\n",[71,415,417],{"class":73,"line":416},21,[71,418,419],{"class":252},"  }\n",[71,421,423],{"class":73,"line":422},22,[71,424,425],{"class":252},"}\n",[211,427,429],{"id":428},"_3-部署","3. 部署",[61,431,433],{"className":63,"code":432,"language":65,"meta":66,"style":66},"# 首次部署\nvercel\n\n# 生产部署\nvercel --prod\n",[68,434,435,440,445,449,454],{"__ignoreMap":66},[71,436,437],{"class":73,"line":74},[71,438,439],{"class":77},"# 首次部署\n",[71,441,442],{"class":73,"line":81},[71,443,444],{"class":155},"vercel\n",[71,446,447],{"class":73,"line":96},[71,448,168],{"emptyLinePlaceholder":167},[71,450,451],{"class":73,"line":107},[71,452,453],{"class":77},"# 生产部署\n",[71,455,456,459],{"class":73,"line":118},[71,457,458],{"class":155},"vercel",[71,460,461],{"class":229}," --prod\n",[54,463,465],{"id":464},"netlify-部署","Netlify 部署",[211,467,469,470],{"id":468},"_1-配置-netlifytoml","1. 配置 ",[68,471,472],{},"netlify.toml",[61,474,478],{"className":475,"code":476,"language":477,"meta":66,"style":66},"language-toml shiki shiki-themes slack-ochin slack-ochin slack-dark","[build]\n  command = \"npm run generate\"\n  publish = \".output/public\"\n\n[build.environment]\n  NODE_VERSION = \"18\"\n\n[[redirects]]\n  from = \"/api/*\"\n  to = \"/.netlify/functions/:splat\"\n  status = 200\n\n[[redirects]]\n  from = \"/*\"\n  to = \"/index.html\"\n  status = 200\n","toml",[68,479,480,485,490,495,499,504,509,513,518,523,528,533,537,541,546,551],{"__ignoreMap":66},[71,481,482],{"class":73,"line":74},[71,483,484],{},"[build]\n",[71,486,487],{"class":73,"line":81},[71,488,489],{},"  command = \"npm run generate\"\n",[71,491,492],{"class":73,"line":96},[71,493,494],{},"  publish = \".output/public\"\n",[71,496,497],{"class":73,"line":107},[71,498,168],{"emptyLinePlaceholder":167},[71,500,501],{"class":73,"line":118},[71,502,503],{},"[build.environment]\n",[71,505,506],{"class":73,"line":129},[71,507,508],{},"  NODE_VERSION = \"18\"\n",[71,510,511],{"class":73,"line":189},[71,512,168],{"emptyLinePlaceholder":167},[71,514,515],{"class":73,"line":195},[71,516,517],{},"[[redirects]]\n",[71,519,520],{"class":73,"line":312},[71,521,522],{},"  from = \"/api/*\"\n",[71,524,525],{"class":73,"line":317},[71,526,527],{},"  to = \"/.netlify/functions/:splat\"\n",[71,529,530],{"class":73,"line":329},[71,531,532],{},"  status = 200\n",[71,534,535],{"class":73,"line":340},[71,536,168],{"emptyLinePlaceholder":167},[71,538,539],{"class":73,"line":346},[71,540,517],{},[71,542,543],{"class":73,"line":351},[71,544,545],{},"  from = \"/*\"\n",[71,547,548],{"class":73,"line":363},[71,549,550],{},"  to = \"/index.html\"\n",[71,552,553],{"class":73,"line":373},[71,554,532],{},[211,556,558],{"id":557},"_2-环境变量","2. 环境变量",[46,560,561],{},"在 Netlify 控制台设置环境变量：",[563,564,565,570,574],"ul",{},[566,567,568],"li",{},[68,569,85],{},[566,571,572],{},[68,573,99],{},[566,575,576],{},[68,577,110],{},[54,579,581],{"id":580},"docker-部署","Docker 部署",[211,583,585,586],{"id":584},"_1-创建-dockerfile","1. 创建 ",[68,587,588],{},"Dockerfile",[61,590,594],{"className":591,"code":592,"language":593,"meta":66,"style":66},"language-dockerfile shiki shiki-themes slack-ochin slack-ochin slack-dark","# 构建阶段\nFROM node:18-alpine AS builder\n\nWORKDIR /app\n\n# 复制依赖文件\nCOPY package*.json ./\nRUN npm ci --only=production && npm cache clean --force\n\n# 复制源代码\nCOPY . .\n\n# 构建应用\nRUN npm run build\n\n# 生产阶段\nFROM node:18-alpine AS runner\n\nWORKDIR /app\n\n# 创建非 root 用户\nRUN addgroup --system --gid 1001 nodejs\nRUN adduser --system --uid 1001 nuxtjs\n\n# 复制构建结果\nCOPY --from=builder --chown=nuxtjs:nodejs /app/.output /app/.output\n\nUSER nuxtjs\n\nEXPOSE 3000\n\nENV PORT 3000\nENV HOST 0.0.0.0\n\nCMD [\"node\", \".output/server/index.mjs\"]\n","dockerfile",[68,595,596,601,606,610,615,619,624,629,634,638,643,648,652,657,662,666,671,676,680,684,688,693,698,704,709,715,721,726,732,737,743,748,754,760,765],{"__ignoreMap":66},[71,597,598],{"class":73,"line":74},[71,599,600],{},"# 构建阶段\n",[71,602,603],{"class":73,"line":81},[71,604,605],{},"FROM node:18-alpine AS builder\n",[71,607,608],{"class":73,"line":96},[71,609,168],{"emptyLinePlaceholder":167},[71,611,612],{"class":73,"line":107},[71,613,614],{},"WORKDIR /app\n",[71,616,617],{"class":73,"line":118},[71,618,168],{"emptyLinePlaceholder":167},[71,620,621],{"class":73,"line":129},[71,622,623],{},"# 复制依赖文件\n",[71,625,626],{"class":73,"line":189},[71,627,628],{},"COPY package*.json ./\n",[71,630,631],{"class":73,"line":195},[71,632,633],{},"RUN npm ci --only=production && npm cache clean --force\n",[71,635,636],{"class":73,"line":312},[71,637,168],{"emptyLinePlaceholder":167},[71,639,640],{"class":73,"line":317},[71,641,642],{},"# 复制源代码\n",[71,644,645],{"class":73,"line":329},[71,646,647],{},"COPY . .\n",[71,649,650],{"class":73,"line":340},[71,651,168],{"emptyLinePlaceholder":167},[71,653,654],{"class":73,"line":346},[71,655,656],{},"# 构建应用\n",[71,658,659],{"class":73,"line":351},[71,660,661],{},"RUN npm run build\n",[71,663,664],{"class":73,"line":363},[71,665,168],{"emptyLinePlaceholder":167},[71,667,668],{"class":73,"line":373},[71,669,670],{},"# 生产阶段\n",[71,672,673],{"class":73,"line":378},[71,674,675],{},"FROM node:18-alpine AS runner\n",[71,677,678],{"class":73,"line":383},[71,679,168],{"emptyLinePlaceholder":167},[71,681,682],{"class":73,"line":392},[71,683,614],{},[71,685,686],{"class":73,"line":405},[71,687,168],{"emptyLinePlaceholder":167},[71,689,690],{"class":73,"line":416},[71,691,692],{},"# 创建非 root 用户\n",[71,694,695],{"class":73,"line":422},[71,696,697],{},"RUN addgroup --system --gid 1001 nodejs\n",[71,699,701],{"class":73,"line":700},23,[71,702,703],{},"RUN adduser --system --uid 1001 nuxtjs\n",[71,705,707],{"class":73,"line":706},24,[71,708,168],{"emptyLinePlaceholder":167},[71,710,712],{"class":73,"line":711},25,[71,713,714],{},"# 复制构建结果\n",[71,716,718],{"class":73,"line":717},26,[71,719,720],{},"COPY --from=builder --chown=nuxtjs:nodejs /app/.output /app/.output\n",[71,722,724],{"class":73,"line":723},27,[71,725,168],{"emptyLinePlaceholder":167},[71,727,729],{"class":73,"line":728},28,[71,730,731],{},"USER nuxtjs\n",[71,733,735],{"class":73,"line":734},29,[71,736,168],{"emptyLinePlaceholder":167},[71,738,740],{"class":73,"line":739},30,[71,741,742],{},"EXPOSE 3000\n",[71,744,746],{"class":73,"line":745},31,[71,747,168],{"emptyLinePlaceholder":167},[71,749,751],{"class":73,"line":750},32,[71,752,753],{},"ENV PORT 3000\n",[71,755,757],{"class":73,"line":756},33,[71,758,759],{},"ENV HOST 0.0.0.0\n",[71,761,763],{"class":73,"line":762},34,[71,764,168],{"emptyLinePlaceholder":167},[71,766,768],{"class":73,"line":767},35,[71,769,770],{},"CMD [\"node\", \".output/server/index.mjs\"]\n",[211,772,774,775],{"id":773},"_2-创建-docker-composeyml","2. 创建 ",[68,776,777],{},"docker-compose.yml",[61,779,783],{"className":780,"code":781,"language":782,"meta":66,"style":66},"language-yaml shiki shiki-themes slack-ochin slack-ochin slack-dark","version: '3.8'\n\nservices:\n  app:\n    build: .\n    ports:\n      - \"3000:3000\"\n    environment:\n      - NUXT_PUBLIC_SITE_URL=https://yoursite.com\n      - NUXT_PUBLIC_API_BASE=https://api.yoursite.com\n      - DATABASE_URL=postgresql://user:password@db:5432/mydb\n    depends_on:\n      - db\n    restart: unless-stopped\n\n  db:\n    image: postgres:15-alpine\n    environment:\n      - POSTGRES_DB=mydb\n      - POSTGRES_USER=user\n      - POSTGRES_PASSWORD=password\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n    restart: unless-stopped\n\nvolumes:\n  postgres_data:\n","yaml",[68,784,785,796,800,808,815,826,833,841,848,855,862,869,876,883,893,897,904,914,920,927,934,941,948,955,963,967,974],{"__ignoreMap":66},[71,786,787,791,793],{"class":73,"line":74},[71,788,790],{"class":789},"skrhf","version",[71,792,275],{"class":252},[71,794,795],{"class":92},"'3.8'\n",[71,797,798],{"class":73,"line":81},[71,799,168],{"emptyLinePlaceholder":167},[71,801,802,805],{"class":73,"line":96},[71,803,804],{"class":789},"services",[71,806,807],{"class":252},":\n",[71,809,810,813],{"class":73,"line":107},[71,811,812],{"class":789},"  app",[71,814,807],{"class":252},[71,816,817,820,822],{"class":73,"line":118},[71,818,819],{"class":789},"    build",[71,821,275],{"class":252},[71,823,825],{"class":824},"sAbJP",".\n",[71,827,828,831],{"class":73,"line":129},[71,829,830],{"class":789},"    ports",[71,832,807],{"class":252},[71,834,835,838],{"class":73,"line":189},[71,836,837],{"class":252},"      - ",[71,839,840],{"class":92},"\"3000:3000\"\n",[71,842,843,846],{"class":73,"line":195},[71,844,845],{"class":789},"    environment",[71,847,807],{"class":252},[71,849,850,852],{"class":73,"line":312},[71,851,837],{"class":252},[71,853,854],{"class":92},"NUXT_PUBLIC_SITE_URL=https://yoursite.com\n",[71,856,857,859],{"class":73,"line":317},[71,858,837],{"class":252},[71,860,861],{"class":92},"NUXT_PUBLIC_API_BASE=https://api.yoursite.com\n",[71,863,864,866],{"class":73,"line":329},[71,865,837],{"class":252},[71,867,868],{"class":92},"DATABASE_URL=postgresql://user:password@db:5432/mydb\n",[71,870,871,874],{"class":73,"line":340},[71,872,873],{"class":789},"    depends_on",[71,875,807],{"class":252},[71,877,878,880],{"class":73,"line":346},[71,879,837],{"class":252},[71,881,882],{"class":92},"db\n",[71,884,885,888,890],{"class":73,"line":351},[71,886,887],{"class":789},"    restart",[71,889,275],{"class":252},[71,891,892],{"class":92},"unless-stopped\n",[71,894,895],{"class":73,"line":363},[71,896,168],{"emptyLinePlaceholder":167},[71,898,899,902],{"class":73,"line":373},[71,900,901],{"class":789},"  db",[71,903,807],{"class":252},[71,905,906,909,911],{"class":73,"line":378},[71,907,908],{"class":789},"    image",[71,910,275],{"class":252},[71,912,913],{"class":92},"postgres:15-alpine\n",[71,915,916,918],{"class":73,"line":383},[71,917,845],{"class":789},[71,919,807],{"class":252},[71,921,922,924],{"class":73,"line":392},[71,923,837],{"class":252},[71,925,926],{"class":92},"POSTGRES_DB=mydb\n",[71,928,929,931],{"class":73,"line":405},[71,930,837],{"class":252},[71,932,933],{"class":92},"POSTGRES_USER=user\n",[71,935,936,938],{"class":73,"line":416},[71,937,837],{"class":252},[71,939,940],{"class":92},"POSTGRES_PASSWORD=password\n",[71,942,943,946],{"class":73,"line":422},[71,944,945],{"class":789},"    volumes",[71,947,807],{"class":252},[71,949,950,952],{"class":73,"line":700},[71,951,837],{"class":252},[71,953,954],{"class":92},"postgres_data:/var/lib/postgresql/data\n",[71,956,957,959,961],{"class":73,"line":706},[71,958,887],{"class":789},[71,960,275],{"class":252},[71,962,892],{"class":92},[71,964,965],{"class":73,"line":711},[71,966,168],{"emptyLinePlaceholder":167},[71,968,969,972],{"class":73,"line":717},[71,970,971],{"class":789},"volumes",[71,973,807],{"class":252},[71,975,976,979],{"class":73,"line":723},[71,977,978],{"class":789},"  postgres_data",[71,980,807],{"class":252},[211,982,984],{"id":983},"_3-构建和运行","3. 构建和运行",[61,986,988],{"className":63,"code":987,"language":65,"meta":66,"style":66},"# 构建镜像\ndocker build -t nuxt-app .\n\n# 运行容器\ndocker run -p 3000:3000 nuxt-app\n\n# 使用 docker-compose\ndocker-compose up -d\n",[68,989,990,995,1012,1016,1021,1036,1040,1045],{"__ignoreMap":66},[71,991,992],{"class":73,"line":74},[71,993,994],{"class":77},"# 构建镜像\n",[71,996,997,1000,1003,1006,1009],{"class":73,"line":81},[71,998,999],{"class":155},"docker",[71,1001,1002],{"class":92}," build",[71,1004,1005],{"class":229}," -t",[71,1007,1008],{"class":92}," nuxt-app",[71,1010,1011],{"class":92}," .\n",[71,1013,1014],{"class":73,"line":96},[71,1015,168],{"emptyLinePlaceholder":167},[71,1017,1018],{"class":73,"line":107},[71,1019,1020],{"class":77},"# 运行容器\n",[71,1022,1023,1025,1027,1030,1033],{"class":73,"line":118},[71,1024,999],{"class":155},[71,1026,159],{"class":92},[71,1028,1029],{"class":229}," -p",[71,1031,1032],{"class":92}," 3000:3000",[71,1034,1035],{"class":92}," nuxt-app\n",[71,1037,1038],{"class":73,"line":129},[71,1039,168],{"emptyLinePlaceholder":167},[71,1041,1042],{"class":73,"line":189},[71,1043,1044],{"class":77},"# 使用 docker-compose\n",[71,1046,1047,1050,1053],{"class":73,"line":195},[71,1048,1049],{"class":155},"docker-compose",[71,1051,1052],{"class":92}," up",[71,1054,1055],{"class":229}," -d\n",[54,1057,1059],{"id":1058},"aws-部署","AWS 部署",[211,1061,1063],{"id":1062},"_1-使用-aws-amplify","1. 使用 AWS Amplify",[61,1065,1067],{"className":780,"code":1066,"language":782,"meta":66,"style":66},"# amplify.yml\nversion: 1\nfrontend:\n  phases:\n    preBuild:\n      commands:\n        - npm ci\n    build:\n      commands:\n        - npm run generate\n  artifacts:\n    baseDirectory: .output/public\n    files:\n      - '**/*'\n  cache:\n    paths:\n      - node_modules/**/*\n",[68,1068,1069,1074,1083,1090,1097,1104,1111,1119,1125,1131,1138,1145,1155,1162,1169,1176,1183],{"__ignoreMap":66},[71,1070,1071],{"class":73,"line":74},[71,1072,1073],{"class":77},"# amplify.yml\n",[71,1075,1076,1078,1080],{"class":73,"line":81},[71,1077,790],{"class":789},[71,1079,275],{"class":252},[71,1081,1082],{"class":824},"1\n",[71,1084,1085,1088],{"class":73,"line":96},[71,1086,1087],{"class":789},"frontend",[71,1089,807],{"class":252},[71,1091,1092,1095],{"class":73,"line":107},[71,1093,1094],{"class":789},"  phases",[71,1096,807],{"class":252},[71,1098,1099,1102],{"class":73,"line":118},[71,1100,1101],{"class":789},"    preBuild",[71,1103,807],{"class":252},[71,1105,1106,1109],{"class":73,"line":129},[71,1107,1108],{"class":789},"      commands",[71,1110,807],{"class":252},[71,1112,1113,1116],{"class":73,"line":189},[71,1114,1115],{"class":252},"        - ",[71,1117,1118],{"class":92},"npm ci\n",[71,1120,1121,1123],{"class":73,"line":195},[71,1122,819],{"class":789},[71,1124,807],{"class":252},[71,1126,1127,1129],{"class":73,"line":312},[71,1128,1108],{"class":789},[71,1130,807],{"class":252},[71,1132,1133,1135],{"class":73,"line":317},[71,1134,1115],{"class":252},[71,1136,1137],{"class":92},"npm run generate\n",[71,1139,1140,1143],{"class":73,"line":329},[71,1141,1142],{"class":789},"  artifacts",[71,1144,807],{"class":252},[71,1146,1147,1150,1152],{"class":73,"line":340},[71,1148,1149],{"class":789},"    baseDirectory",[71,1151,275],{"class":252},[71,1153,1154],{"class":92},".output/public\n",[71,1156,1157,1160],{"class":73,"line":346},[71,1158,1159],{"class":789},"    files",[71,1161,807],{"class":252},[71,1163,1164,1166],{"class":73,"line":351},[71,1165,837],{"class":252},[71,1167,1168],{"class":92},"'**/*'\n",[71,1170,1171,1174],{"class":73,"line":363},[71,1172,1173],{"class":789},"  cache",[71,1175,807],{"class":252},[71,1177,1178,1181],{"class":73,"line":373},[71,1179,1180],{"class":789},"    paths",[71,1182,807],{"class":252},[71,1184,1185,1187],{"class":73,"line":378},[71,1186,837],{"class":252},[71,1188,1189],{"class":92},"node_modules/**/*\n",[211,1191,1193],{"id":1192},"_2-使用-aws-lambda","2. 使用 AWS Lambda",[46,1195,1196],{},"安装 Serverless 框架：",[61,1198,1200],{"className":63,"code":1199,"language":65,"meta":66,"style":66},"npm install -g serverless\nnpm install --save-dev serverless-nuxt\n",[68,1201,1202,1214],{"__ignoreMap":66},[71,1203,1204,1206,1209,1211],{"class":73,"line":74},[71,1205,156],{"class":155},[71,1207,1208],{"class":92}," install",[71,1210,230],{"class":229},[71,1212,1213],{"class":92}," serverless\n",[71,1215,1216,1218,1220,1223],{"class":73,"line":81},[71,1217,156],{"class":155},[71,1219,1208],{"class":92},[71,1221,1222],{"class":229}," --save-dev",[71,1224,1225],{"class":92}," serverless-nuxt\n",[46,1227,1228,1229,1232],{},"配置 ",[68,1230,1231],{},"serverless.yml","：",[61,1234,1236],{"className":780,"code":1235,"language":782,"meta":66,"style":66},"service: nuxt-app\n\nprovider:\n  name: aws\n  runtime: nodejs18.x\n  region: us-east-1\n\nplugins:\n  - serverless-nuxt\n\ncustom:\n  nuxt:\n    version: 3\n\nfunctions:\n  nuxt:\n    handler: .output/server/index.handler\n    events:\n      - http:\n          path: /{proxy+}\n          method: ANY\n      - http:\n          path: /\n          method: ANY\n",[68,1237,1238,1248,1252,1259,1269,1279,1289,1293,1300,1308,1312,1319,1326,1336,1340,1347,1353,1363,1370,1379,1389,1399,1407,1416],{"__ignoreMap":66},[71,1239,1240,1243,1245],{"class":73,"line":74},[71,1241,1242],{"class":789},"service",[71,1244,275],{"class":252},[71,1246,1247],{"class":92},"nuxt-app\n",[71,1249,1250],{"class":73,"line":81},[71,1251,168],{"emptyLinePlaceholder":167},[71,1253,1254,1257],{"class":73,"line":96},[71,1255,1256],{"class":789},"provider",[71,1258,807],{"class":252},[71,1260,1261,1264,1266],{"class":73,"line":107},[71,1262,1263],{"class":789},"  name",[71,1265,275],{"class":252},[71,1267,1268],{"class":92},"aws\n",[71,1270,1271,1274,1276],{"class":73,"line":118},[71,1272,1273],{"class":789},"  runtime",[71,1275,275],{"class":252},[71,1277,1278],{"class":92},"nodejs18.x\n",[71,1280,1281,1284,1286],{"class":73,"line":129},[71,1282,1283],{"class":789},"  region",[71,1285,275],{"class":252},[71,1287,1288],{"class":92},"us-east-1\n",[71,1290,1291],{"class":73,"line":189},[71,1292,168],{"emptyLinePlaceholder":167},[71,1294,1295,1298],{"class":73,"line":195},[71,1296,1297],{"class":789},"plugins",[71,1299,807],{"class":252},[71,1301,1302,1305],{"class":73,"line":312},[71,1303,1304],{"class":252},"  - ",[71,1306,1307],{"class":92},"serverless-nuxt\n",[71,1309,1310],{"class":73,"line":317},[71,1311,168],{"emptyLinePlaceholder":167},[71,1313,1314,1317],{"class":73,"line":329},[71,1315,1316],{"class":789},"custom",[71,1318,807],{"class":252},[71,1320,1321,1324],{"class":73,"line":340},[71,1322,1323],{"class":789},"  nuxt",[71,1325,807],{"class":252},[71,1327,1328,1331,1333],{"class":73,"line":346},[71,1329,1330],{"class":789},"    version",[71,1332,275],{"class":252},[71,1334,1335],{"class":824},"3\n",[71,1337,1338],{"class":73,"line":351},[71,1339,168],{"emptyLinePlaceholder":167},[71,1341,1342,1345],{"class":73,"line":363},[71,1343,1344],{"class":789},"functions",[71,1346,807],{"class":252},[71,1348,1349,1351],{"class":73,"line":373},[71,1350,1323],{"class":789},[71,1352,807],{"class":252},[71,1354,1355,1358,1360],{"class":73,"line":378},[71,1356,1357],{"class":789},"    handler",[71,1359,275],{"class":252},[71,1361,1362],{"class":92},".output/server/index.handler\n",[71,1364,1365,1368],{"class":73,"line":383},[71,1366,1367],{"class":789},"    events",[71,1369,807],{"class":252},[71,1371,1372,1374,1377],{"class":73,"line":392},[71,1373,837],{"class":252},[71,1375,1376],{"class":789},"http",[71,1378,807],{"class":252},[71,1380,1381,1384,1386],{"class":73,"line":405},[71,1382,1383],{"class":789},"          path",[71,1385,275],{"class":252},[71,1387,1388],{"class":92},"/{proxy+}\n",[71,1390,1391,1394,1396],{"class":73,"line":416},[71,1392,1393],{"class":789},"          method",[71,1395,275],{"class":252},[71,1397,1398],{"class":92},"ANY\n",[71,1400,1401,1403,1405],{"class":73,"line":422},[71,1402,837],{"class":252},[71,1404,1376],{"class":789},[71,1406,807],{"class":252},[71,1408,1409,1411,1413],{"class":73,"line":700},[71,1410,1383],{"class":789},[71,1412,275],{"class":252},[71,1414,1415],{"class":92},"/\n",[71,1417,1418,1420,1422],{"class":73,"line":706},[71,1419,1393],{"class":789},[71,1421,275],{"class":252},[71,1423,1398],{"class":92},[46,1425,1426],{},"部署：",[61,1428,1430],{"className":63,"code":1429,"language":65,"meta":66,"style":66},"serverless deploy\n",[68,1431,1432],{"__ignoreMap":66},[71,1433,1434,1437],{"class":73,"line":74},[71,1435,1436],{"class":155},"serverless",[71,1438,1439],{"class":92}," deploy\n",[50,1441,1442],{"id":1442},"性能优化",[54,1444,1445],{"id":1445},"缓存策略",[211,1447,1449],{"id":1448},"_1-静态资源缓存","1. 静态资源缓存",[61,1451,1455],{"className":1452,"code":1453,"language":1454,"meta":66,"style":66},"language-typescript shiki shiki-themes slack-ochin slack-ochin slack-dark","// nuxt.config.ts\nexport default defineNuxtConfig({\n  nitro: {\n    routeRules: {\n      // 静态页面缓存 1 小时\n      '/': { prerender: true, headers: { 'cache-control': 's-maxage=3600' } },\n      \n      // API 路由缓存 10 分钟\n      '/api/**': { headers: { 'cache-control': 's-maxage=600' } },\n      \n      // 静态资源长期缓存\n      '/images/**': { headers: { 'cache-control': 's-maxage=31536000' } }\n    }\n  }\n})\n","typescript",[68,1456,1457,1462,1477,1486,1493,1498,1535,1540,1545,1567,1571,1576,1599,1603,1607],{"__ignoreMap":66},[71,1458,1459],{"class":73,"line":74},[71,1460,1461],{"class":77},"// nuxt.config.ts\n",[71,1463,1464,1468,1471,1474],{"class":73,"line":81},[71,1465,1467],{"class":1466},"s7VM3","export",[71,1469,1470],{"class":1466}," default",[71,1472,1473],{"class":155}," defineNuxtConfig",[71,1475,1476],{"class":252},"({\n",[71,1478,1479,1483],{"class":73,"line":96},[71,1480,1482],{"class":1481},"s6DEn","  nitro:",[71,1484,1485],{"class":252}," {\n",[71,1487,1488,1491],{"class":73,"line":107},[71,1489,1490],{"class":1481},"    routeRules:",[71,1492,1485],{"class":252},[71,1494,1495],{"class":73,"line":118},[71,1496,1497],{"class":77},"      // 静态页面缓存 1 小时\n",[71,1499,1500,1503,1506,1509,1512,1516,1519,1522,1524,1527,1529,1532],{"class":73,"line":129},[71,1501,1502],{"class":92},"      '/'",[71,1504,1505],{"class":1481},":",[71,1507,1508],{"class":252}," { ",[71,1510,1511],{"class":1481},"prerender:",[71,1513,1515],{"class":1514},"sBSzB"," true",[71,1517,1518],{"class":252},", ",[71,1520,1521],{"class":1481},"headers:",[71,1523,1508],{"class":252},[71,1525,1526],{"class":92},"'cache-control'",[71,1528,1505],{"class":1481},[71,1530,1531],{"class":92}," 's-maxage=3600'",[71,1533,1534],{"class":252}," } },\n",[71,1536,1537],{"class":73,"line":189},[71,1538,1539],{"class":252},"      \n",[71,1541,1542],{"class":73,"line":195},[71,1543,1544],{"class":77},"      // API 路由缓存 10 分钟\n",[71,1546,1547,1550,1552,1554,1556,1558,1560,1562,1565],{"class":73,"line":312},[71,1548,1549],{"class":92},"      '/api/**'",[71,1551,1505],{"class":1481},[71,1553,1508],{"class":252},[71,1555,1521],{"class":1481},[71,1557,1508],{"class":252},[71,1559,1526],{"class":92},[71,1561,1505],{"class":1481},[71,1563,1564],{"class":92}," 's-maxage=600'",[71,1566,1534],{"class":252},[71,1568,1569],{"class":73,"line":317},[71,1570,1539],{"class":252},[71,1572,1573],{"class":73,"line":329},[71,1574,1575],{"class":77},"      // 静态资源长期缓存\n",[71,1577,1578,1581,1583,1585,1587,1589,1591,1593,1596],{"class":73,"line":340},[71,1579,1580],{"class":92},"      '/images/**'",[71,1582,1505],{"class":1481},[71,1584,1508],{"class":252},[71,1586,1521],{"class":1481},[71,1588,1508],{"class":252},[71,1590,1526],{"class":92},[71,1592,1505],{"class":1481},[71,1594,1595],{"class":92}," 's-maxage=31536000'",[71,1597,1598],{"class":252}," } }\n",[71,1600,1601],{"class":73,"line":346},[71,1602,297],{"class":252},[71,1604,1605],{"class":73,"line":351},[71,1606,419],{"class":252},[71,1608,1609],{"class":73,"line":363},[71,1610,1611],{"class":252},"})\n",[211,1613,1615],{"id":1614},"_2-cdn-配置","2. CDN 配置",[61,1617,1619],{"className":1452,"code":1618,"language":1454,"meta":66,"style":66},"// nuxt.config.ts\nexport default defineNuxtConfig({\n  app: {\n    cdnURL: 'https://cdn.yoursite.com'\n  },\n  \n  image: {\n    domains: ['cdn.yoursite.com']\n  }\n})\n",[68,1620,1621,1625,1635,1642,1650,1655,1660,1667,1681,1685],{"__ignoreMap":66},[71,1622,1623],{"class":73,"line":74},[71,1624,1461],{"class":77},[71,1626,1627,1629,1631,1633],{"class":73,"line":81},[71,1628,1467],{"class":1466},[71,1630,1470],{"class":1466},[71,1632,1473],{"class":155},[71,1634,1476],{"class":252},[71,1636,1637,1640],{"class":73,"line":96},[71,1638,1639],{"class":1481},"  app:",[71,1641,1485],{"class":252},[71,1643,1644,1647],{"class":73,"line":107},[71,1645,1646],{"class":1481},"    cdnURL:",[71,1648,1649],{"class":92}," 'https://cdn.yoursite.com'\n",[71,1651,1652],{"class":73,"line":118},[71,1653,1654],{"class":252},"  },\n",[71,1656,1657],{"class":73,"line":129},[71,1658,1659],{"class":252},"  \n",[71,1661,1662,1665],{"class":73,"line":189},[71,1663,1664],{"class":1481},"  image:",[71,1666,1485],{"class":252},[71,1668,1669,1672,1675,1678],{"class":73,"line":195},[71,1670,1671],{"class":1481},"    domains:",[71,1673,1674],{"class":252}," [",[71,1676,1677],{"class":92},"'cdn.yoursite.com'",[71,1679,1680],{"class":252},"]\n",[71,1682,1683],{"class":73,"line":312},[71,1684,419],{"class":252},[71,1686,1687],{"class":73,"line":317},[71,1688,1611],{"class":252},[54,1690,1691],{"id":1691},"压缩和优化",[61,1693,1695],{"className":1452,"code":1694,"language":1454,"meta":66,"style":66},"// nuxt.config.ts\nexport default defineNuxtConfig({\n  nitro: {\n    // 启用压缩\n    compressPublicAssets: true,\n    \n    // 预渲染路由\n    prerender: {\n      routes: ['/sitemap.xml', '/robots.txt']\n    }\n  },\n  \n  // 实验性功能\n  experimental: {\n    // 减少 payload 大小\n    payloadExtraction: false,\n    \n    // 内联样式\n    inlineSSRStyles: false\n  }\n})\n",[68,1696,1697,1701,1711,1717,1722,1731,1736,1741,1748,1765,1769,1773,1777,1782,1789,1794,1804,1808,1813,1821,1825],{"__ignoreMap":66},[71,1698,1699],{"class":73,"line":74},[71,1700,1461],{"class":77},[71,1702,1703,1705,1707,1709],{"class":73,"line":81},[71,1704,1467],{"class":1466},[71,1706,1470],{"class":1466},[71,1708,1473],{"class":155},[71,1710,1476],{"class":252},[71,1712,1713,1715],{"class":73,"line":96},[71,1714,1482],{"class":1481},[71,1716,1485],{"class":252},[71,1718,1719],{"class":73,"line":107},[71,1720,1721],{"class":77},"    // 启用压缩\n",[71,1723,1724,1727,1729],{"class":73,"line":118},[71,1725,1726],{"class":1481},"    compressPublicAssets:",[71,1728,1515],{"class":1514},[71,1730,282],{"class":252},[71,1732,1733],{"class":73,"line":129},[71,1734,1735],{"class":252},"    \n",[71,1737,1738],{"class":73,"line":189},[71,1739,1740],{"class":77},"    // 预渲染路由\n",[71,1742,1743,1746],{"class":73,"line":195},[71,1744,1745],{"class":1481},"    prerender:",[71,1747,1485],{"class":252},[71,1749,1750,1753,1755,1758,1760,1763],{"class":73,"line":312},[71,1751,1752],{"class":1481},"      routes:",[71,1754,1674],{"class":252},[71,1756,1757],{"class":92},"'/sitemap.xml'",[71,1759,1518],{"class":252},[71,1761,1762],{"class":92},"'/robots.txt'",[71,1764,1680],{"class":252},[71,1766,1767],{"class":73,"line":317},[71,1768,297],{"class":252},[71,1770,1771],{"class":73,"line":329},[71,1772,1654],{"class":252},[71,1774,1775],{"class":73,"line":340},[71,1776,1659],{"class":252},[71,1778,1779],{"class":73,"line":346},[71,1780,1781],{"class":77},"  // 实验性功能\n",[71,1783,1784,1787],{"class":73,"line":351},[71,1785,1786],{"class":1481},"  experimental:",[71,1788,1485],{"class":252},[71,1790,1791],{"class":73,"line":363},[71,1792,1793],{"class":77},"    // 减少 payload 大小\n",[71,1795,1796,1799,1802],{"class":73,"line":373},[71,1797,1798],{"class":1481},"    payloadExtraction:",[71,1800,1801],{"class":1514}," false",[71,1803,282],{"class":252},[71,1805,1806],{"class":73,"line":378},[71,1807,1735],{"class":252},[71,1809,1810],{"class":73,"line":383},[71,1811,1812],{"class":77},"    // 内联样式\n",[71,1814,1815,1818],{"class":73,"line":392},[71,1816,1817],{"class":1481},"    inlineSSRStyles:",[71,1819,1820],{"class":1514}," false\n",[71,1822,1823],{"class":73,"line":405},[71,1824,419],{"class":252},[71,1826,1827],{"class":73,"line":416},[71,1828,1611],{"class":252},[50,1830,1831],{"id":1831},"监控和日志",[54,1833,1834],{"id":1834},"错误监控",[211,1836,1838],{"id":1837},"_1-sentry-集成","1. Sentry 集成",[61,1840,1842],{"className":63,"code":1841,"language":65,"meta":66,"style":66},"npm install @sentry/nuxt\n",[68,1843,1844],{"__ignoreMap":66},[71,1845,1846,1848,1850],{"class":73,"line":74},[71,1847,156],{"class":155},[71,1849,1208],{"class":92},[71,1851,1852],{"class":92}," @sentry/nuxt\n",[61,1854,1856],{"className":1452,"code":1855,"language":1454,"meta":66,"style":66},"// nuxt.config.ts\nexport default defineNuxtConfig({\n  modules: ['@sentry/nuxt/module'],\n  \n  sentry: {\n    dsn: process.env.SENTRY_DSN\n  }\n})\n",[68,1857,1858,1862,1872,1885,1889,1896,1915,1919],{"__ignoreMap":66},[71,1859,1860],{"class":73,"line":74},[71,1861,1461],{"class":77},[71,1863,1864,1866,1868,1870],{"class":73,"line":81},[71,1865,1467],{"class":1466},[71,1867,1470],{"class":1466},[71,1869,1473],{"class":155},[71,1871,1476],{"class":252},[71,1873,1874,1877,1879,1882],{"class":73,"line":96},[71,1875,1876],{"class":1481},"  modules:",[71,1878,1674],{"class":252},[71,1880,1881],{"class":92},"'@sentry/nuxt/module'",[71,1883,1884],{"class":252},"],\n",[71,1886,1887],{"class":73,"line":107},[71,1888,1659],{"class":252},[71,1890,1891,1894],{"class":73,"line":118},[71,1892,1893],{"class":1481},"  sentry:",[71,1895,1485],{"class":252},[71,1897,1898,1901,1904,1907,1910,1912],{"class":73,"line":129},[71,1899,1900],{"class":1481},"    dsn:",[71,1902,1903],{"class":84}," process",[71,1905,1906],{"class":252},".",[71,1908,1909],{"class":84},"env",[71,1911,1906],{"class":252},[71,1913,1914],{"class":84},"SENTRY_DSN\n",[71,1916,1917],{"class":73,"line":189},[71,1918,419],{"class":252},[71,1920,1921],{"class":73,"line":195},[71,1922,1611],{"class":252},[211,1924,1926],{"id":1925},"_2-自定义错误处理","2. 自定义错误处理",[61,1928,1930],{"className":1452,"code":1929,"language":1454,"meta":66,"style":66},"// plugins/error-tracking.client.ts\nexport default defineNuxtPlugin(() => {\n  // 全局错误处理\n  window.addEventListener('error', (event) => {\n    console.error('Global error:', event.error)\n    \n    // 发送到监控服务\n    $fetch('/api/errors', {\n      method: 'POST',\n      body: {\n        message: event.error.message,\n        stack: event.error.stack,\n        url: window.location.href,\n        userAgent: navigator.userAgent\n      }\n    })\n  })\n})\n",[68,1931,1932,1937,1955,1960,1990,2016,2020,2025,2038,2048,2055,2074,2092,2112,2125,2130,2135,2140],{"__ignoreMap":66},[71,1933,1934],{"class":73,"line":74},[71,1935,1936],{"class":77},"// plugins/error-tracking.client.ts\n",[71,1938,1939,1941,1943,1946,1949,1953],{"class":73,"line":81},[71,1940,1467],{"class":1466},[71,1942,1470],{"class":1466},[71,1944,1945],{"class":155}," defineNuxtPlugin",[71,1947,1948],{"class":252},"(() ",[71,1950,1952],{"class":1951},"sD1d_","=>",[71,1954,1485],{"class":252},[71,1956,1957],{"class":73,"line":96},[71,1958,1959],{"class":77},"  // 全局错误处理\n",[71,1961,1962,1965,1967,1970,1973,1976,1979,1983,1986,1988],{"class":73,"line":107},[71,1963,1964],{"class":84},"  window",[71,1966,1906],{"class":252},[71,1968,1969],{"class":155},"addEventListener",[71,1971,1972],{"class":252},"(",[71,1974,1975],{"class":92},"'error'",[71,1977,1978],{"class":252},", (",[71,1980,1982],{"class":1981},"sozAS","event",[71,1984,1985],{"class":252},") ",[71,1987,1952],{"class":1951},[71,1989,1485],{"class":252},[71,1991,1992,1995,1997,2000,2002,2005,2007,2009,2011,2013],{"class":73,"line":118},[71,1993,1994],{"class":84},"    console",[71,1996,1906],{"class":252},[71,1998,1999],{"class":155},"error",[71,2001,1972],{"class":252},[71,2003,2004],{"class":92},"'Global error:'",[71,2006,1518],{"class":252},[71,2008,1982],{"class":84},[71,2010,1906],{"class":252},[71,2012,1999],{"class":84},[71,2014,2015],{"class":252},")\n",[71,2017,2018],{"class":73,"line":129},[71,2019,1735],{"class":252},[71,2021,2022],{"class":73,"line":189},[71,2023,2024],{"class":77},"    // 发送到监控服务\n",[71,2026,2027,2030,2032,2035],{"class":73,"line":195},[71,2028,2029],{"class":155},"    $fetch",[71,2031,1972],{"class":252},[71,2033,2034],{"class":92},"'/api/errors'",[71,2036,2037],{"class":252},", {\n",[71,2039,2040,2043,2046],{"class":73,"line":312},[71,2041,2042],{"class":1481},"      method:",[71,2044,2045],{"class":92}," 'POST'",[71,2047,282],{"class":252},[71,2049,2050,2053],{"class":73,"line":317},[71,2051,2052],{"class":1481},"      body:",[71,2054,1485],{"class":252},[71,2056,2057,2060,2063,2065,2067,2069,2072],{"class":73,"line":329},[71,2058,2059],{"class":1481},"        message:",[71,2061,2062],{"class":84}," event",[71,2064,1906],{"class":252},[71,2066,1999],{"class":84},[71,2068,1906],{"class":252},[71,2070,2071],{"class":84},"message",[71,2073,282],{"class":252},[71,2075,2076,2079,2081,2083,2085,2087,2090],{"class":73,"line":340},[71,2077,2078],{"class":1481},"        stack:",[71,2080,2062],{"class":84},[71,2082,1906],{"class":252},[71,2084,1999],{"class":84},[71,2086,1906],{"class":252},[71,2088,2089],{"class":84},"stack",[71,2091,282],{"class":252},[71,2093,2094,2097,2100,2102,2105,2107,2110],{"class":73,"line":346},[71,2095,2096],{"class":1481},"        url:",[71,2098,2099],{"class":84}," window",[71,2101,1906],{"class":252},[71,2103,2104],{"class":84},"location",[71,2106,1906],{"class":252},[71,2108,2109],{"class":84},"href",[71,2111,282],{"class":252},[71,2113,2114,2117,2120,2122],{"class":73,"line":351},[71,2115,2116],{"class":1481},"        userAgent:",[71,2118,2119],{"class":84}," navigator",[71,2121,1906],{"class":252},[71,2123,2124],{"class":84},"userAgent\n",[71,2126,2127],{"class":73,"line":363},[71,2128,2129],{"class":252},"      }\n",[71,2131,2132],{"class":73,"line":373},[71,2133,2134],{"class":252},"    })\n",[71,2136,2137],{"class":73,"line":378},[71,2138,2139],{"class":252},"  })\n",[71,2141,2142],{"class":73,"line":383},[71,2143,1611],{"class":252},[54,2145,2146],{"id":2146},"性能监控",[61,2148,2150],{"className":1452,"code":2149,"language":1454,"meta":66,"style":66},"// plugins/analytics.client.ts\nexport default defineNuxtPlugin(() => {\n  // 页面加载时间\n  window.addEventListener('load', () => {\n    const loadTime = performance.now()\n    \n    // 发送性能数据\n    $fetch('/api/analytics', {\n      method: 'POST',\n      body: {\n        type: 'page_load',\n        duration: loadTime,\n        url: window.location.href\n      }\n    })\n  })\n})\n",[68,2151,2152,2157,2171,2176,2196,2218,2222,2227,2238,2246,2252,2262,2271,2286,2290,2294,2298],{"__ignoreMap":66},[71,2153,2154],{"class":73,"line":74},[71,2155,2156],{"class":77},"// plugins/analytics.client.ts\n",[71,2158,2159,2161,2163,2165,2167,2169],{"class":73,"line":81},[71,2160,1467],{"class":1466},[71,2162,1470],{"class":1466},[71,2164,1945],{"class":155},[71,2166,1948],{"class":252},[71,2168,1952],{"class":1951},[71,2170,1485],{"class":252},[71,2172,2173],{"class":73,"line":96},[71,2174,2175],{"class":77},"  // 页面加载时间\n",[71,2177,2178,2180,2182,2184,2186,2189,2192,2194],{"class":73,"line":107},[71,2179,1964],{"class":84},[71,2181,1906],{"class":252},[71,2183,1969],{"class":155},[71,2185,1972],{"class":252},[71,2187,2188],{"class":92},"'load'",[71,2190,2191],{"class":252},", () ",[71,2193,1952],{"class":1951},[71,2195,1485],{"class":252},[71,2197,2198,2201,2204,2207,2210,2212,2215],{"class":73,"line":118},[71,2199,2200],{"class":1951},"    const",[71,2202,2203],{"class":84}," loadTime",[71,2205,2206],{"class":88}," =",[71,2208,2209],{"class":84}," performance",[71,2211,1906],{"class":252},[71,2213,2214],{"class":155},"now",[71,2216,2217],{"class":252},"()\n",[71,2219,2220],{"class":73,"line":129},[71,2221,1735],{"class":252},[71,2223,2224],{"class":73,"line":189},[71,2225,2226],{"class":77},"    // 发送性能数据\n",[71,2228,2229,2231,2233,2236],{"class":73,"line":195},[71,2230,2029],{"class":155},[71,2232,1972],{"class":252},[71,2234,2235],{"class":92},"'/api/analytics'",[71,2237,2037],{"class":252},[71,2239,2240,2242,2244],{"class":73,"line":312},[71,2241,2042],{"class":1481},[71,2243,2045],{"class":92},[71,2245,282],{"class":252},[71,2247,2248,2250],{"class":73,"line":317},[71,2249,2052],{"class":1481},[71,2251,1485],{"class":252},[71,2253,2254,2257,2260],{"class":73,"line":329},[71,2255,2256],{"class":1481},"        type:",[71,2258,2259],{"class":92}," 'page_load'",[71,2261,282],{"class":252},[71,2263,2264,2267,2269],{"class":73,"line":340},[71,2265,2266],{"class":1481},"        duration:",[71,2268,2203],{"class":84},[71,2270,282],{"class":252},[71,2272,2273,2275,2277,2279,2281,2283],{"class":73,"line":346},[71,2274,2096],{"class":1481},[71,2276,2099],{"class":84},[71,2278,1906],{"class":252},[71,2280,2104],{"class":84},[71,2282,1906],{"class":252},[71,2284,2285],{"class":84},"href\n",[71,2287,2288],{"class":73,"line":351},[71,2289,2129],{"class":252},[71,2291,2292],{"class":73,"line":363},[71,2293,2134],{"class":252},[71,2295,2296],{"class":73,"line":373},[71,2297,2139],{"class":252},[71,2299,2300],{"class":73,"line":378},[71,2301,1611],{"class":252},[50,2303,2304],{"id":2304},"安全配置",[54,2306,2308],{"id":2307},"https-和安全头","HTTPS 和安全头",[61,2310,2312],{"className":1452,"code":2311,"language":1454,"meta":66,"style":66},"// nuxt.config.ts\nexport default defineNuxtConfig({\n  nitro: {\n    routeRules: {\n      '/**': {\n        headers: {\n          'X-Frame-Options': 'DENY',\n          'X-Content-Type-Options': 'nosniff',\n          'X-XSS-Protection': '1; mode=block',\n          'Strict-Transport-Security': 'max-age=31536000; includeSubDomains',\n          'Content-Security-Policy': \"default-src 'self'; script-src 'self' 'unsafe-inline'\"\n        }\n      }\n    }\n  }\n})\n",[68,2313,2314,2318,2328,2334,2340,2349,2356,2368,2380,2392,2404,2414,2419,2423,2427,2431],{"__ignoreMap":66},[71,2315,2316],{"class":73,"line":74},[71,2317,1461],{"class":77},[71,2319,2320,2322,2324,2326],{"class":73,"line":81},[71,2321,1467],{"class":1466},[71,2323,1470],{"class":1466},[71,2325,1473],{"class":155},[71,2327,1476],{"class":252},[71,2329,2330,2332],{"class":73,"line":96},[71,2331,1482],{"class":1481},[71,2333,1485],{"class":252},[71,2335,2336,2338],{"class":73,"line":107},[71,2337,1490],{"class":1481},[71,2339,1485],{"class":252},[71,2341,2342,2345,2347],{"class":73,"line":118},[71,2343,2344],{"class":92},"      '/**'",[71,2346,1505],{"class":1481},[71,2348,1485],{"class":252},[71,2350,2351,2354],{"class":73,"line":129},[71,2352,2353],{"class":1481},"        headers:",[71,2355,1485],{"class":252},[71,2357,2358,2361,2363,2366],{"class":73,"line":189},[71,2359,2360],{"class":92},"          'X-Frame-Options'",[71,2362,1505],{"class":1481},[71,2364,2365],{"class":92}," 'DENY'",[71,2367,282],{"class":252},[71,2369,2370,2373,2375,2378],{"class":73,"line":195},[71,2371,2372],{"class":92},"          'X-Content-Type-Options'",[71,2374,1505],{"class":1481},[71,2376,2377],{"class":92}," 'nosniff'",[71,2379,282],{"class":252},[71,2381,2382,2385,2387,2390],{"class":73,"line":312},[71,2383,2384],{"class":92},"          'X-XSS-Protection'",[71,2386,1505],{"class":1481},[71,2388,2389],{"class":92}," '1; mode=block'",[71,2391,282],{"class":252},[71,2393,2394,2397,2399,2402],{"class":73,"line":317},[71,2395,2396],{"class":92},"          'Strict-Transport-Security'",[71,2398,1505],{"class":1481},[71,2400,2401],{"class":92}," 'max-age=31536000; includeSubDomains'",[71,2403,282],{"class":252},[71,2405,2406,2409,2411],{"class":73,"line":329},[71,2407,2408],{"class":92},"          'Content-Security-Policy'",[71,2410,1505],{"class":1481},[71,2412,2413],{"class":92}," \"default-src 'self'; script-src 'self' 'unsafe-inline'\"\n",[71,2415,2416],{"class":73,"line":340},[71,2417,2418],{"class":252},"        }\n",[71,2420,2421],{"class":73,"line":346},[71,2422,2129],{"class":252},[71,2424,2425],{"class":73,"line":351},[71,2426,297],{"class":252},[71,2428,2429],{"class":73,"line":363},[71,2430,419],{"class":252},[71,2432,2433],{"class":73,"line":373},[71,2434,1611],{"class":252},[54,2436,2437],{"id":2437},"环境变量安全",[61,2439,2441],{"className":63,"code":2440,"language":65,"meta":66,"style":66},"# 使用加密的环境变量\nNUXT_SECRET_KEY=$(openssl rand -base64 32)\nDATABASE_PASSWORD=$(openssl rand -base64 16)\n",[68,2442,2443,2448,2471],{"__ignoreMap":66},[71,2444,2445],{"class":73,"line":74},[71,2446,2447],{"class":77},"# 使用加密的环境变量\n",[71,2449,2450,2452,2454,2457,2460,2463,2466,2469],{"class":73,"line":81},[71,2451,121],{"class":84},[71,2453,89],{"class":88},[71,2455,2456],{"class":252},"$(",[71,2458,2459],{"class":155},"openssl",[71,2461,2462],{"class":92}," rand",[71,2464,2465],{"class":229}," -base64",[71,2467,2468],{"class":824}," 32",[71,2470,2015],{"class":252},[71,2472,2473,2476,2478,2480,2482,2484,2486,2489],{"class":73,"line":96},[71,2474,2475],{"class":84},"DATABASE_PASSWORD",[71,2477,89],{"class":88},[71,2479,2456],{"class":252},[71,2481,2459],{"class":155},[71,2483,2462],{"class":92},[71,2485,2465],{"class":229},[71,2487,2488],{"class":824}," 16",[71,2490,2015],{"class":252},[50,2492,2493],{"id":2493},"备份和恢复",[54,2495,2496],{"id":2496},"数据库备份",[61,2498,2500],{"className":63,"code":2499,"language":65,"meta":66,"style":66},"#!/bin/bash\n# backup.sh\n\nDATE=$(date +%Y%m%d_%H%M%S)\nBACKUP_DIR=\"/backups\"\nDB_NAME=\"myapp\"\n\n# 创建备份\npg_dump $DATABASE_URL > $BACKUP_DIR/backup_$DATE.sql\n\n# 保留最近 7 天的备份\nfind $BACKUP_DIR -name \"backup_*.sql\" -mtime +7 -delete\n\necho \"Backup completed: backup_$DATE.sql\"\n",[68,2501,2502,2507,2512,2516,2533,2543,2553,2557,2562,2585,2589,2594,2616,2620],{"__ignoreMap":66},[71,2503,2504],{"class":73,"line":74},[71,2505,2506],{"class":77},"#!/bin/bash\n",[71,2508,2509],{"class":73,"line":81},[71,2510,2511],{"class":77},"# backup.sh\n",[71,2513,2514],{"class":73,"line":96},[71,2515,168],{"emptyLinePlaceholder":167},[71,2517,2518,2521,2523,2525,2528,2531],{"class":73,"line":107},[71,2519,2520],{"class":84},"DATE",[71,2522,89],{"class":88},[71,2524,2456],{"class":252},[71,2526,2527],{"class":155},"date",[71,2529,2530],{"class":92}," +%Y%m%d_%H%M%S",[71,2532,2015],{"class":252},[71,2534,2535,2538,2540],{"class":73,"line":118},[71,2536,2537],{"class":84},"BACKUP_DIR",[71,2539,89],{"class":88},[71,2541,2542],{"class":92},"\"/backups\"\n",[71,2544,2545,2548,2550],{"class":73,"line":129},[71,2546,2547],{"class":84},"DB_NAME",[71,2549,89],{"class":88},[71,2551,2552],{"class":92},"\"myapp\"\n",[71,2554,2555],{"class":73,"line":189},[71,2556,168],{"emptyLinePlaceholder":167},[71,2558,2559],{"class":73,"line":195},[71,2560,2561],{"class":77},"# 创建备份\n",[71,2563,2564,2567,2570,2573,2576,2579,2582],{"class":73,"line":312},[71,2565,2566],{"class":155},"pg_dump",[71,2568,2569],{"class":84}," $DATABASE_URL",[71,2571,2572],{"class":88}," >",[71,2574,2575],{"class":84}," $BACKUP_DIR",[71,2577,2578],{"class":92},"/backup_",[71,2580,2581],{"class":84},"$DATE",[71,2583,2584],{"class":92},".sql\n",[71,2586,2587],{"class":73,"line":317},[71,2588,168],{"emptyLinePlaceholder":167},[71,2590,2591],{"class":73,"line":329},[71,2592,2593],{"class":77},"# 保留最近 7 天的备份\n",[71,2595,2596,2599,2601,2604,2607,2610,2613],{"class":73,"line":340},[71,2597,2598],{"class":155},"find",[71,2600,2575],{"class":84},[71,2602,2603],{"class":229}," -name",[71,2605,2606],{"class":92}," \"backup_*.sql\"",[71,2608,2609],{"class":229}," -mtime",[71,2611,2612],{"class":92}," +7",[71,2614,2615],{"class":229}," -delete\n",[71,2617,2618],{"class":73,"line":346},[71,2619,168],{"emptyLinePlaceholder":167},[71,2621,2622,2626,2629,2631],{"class":73,"line":351},[71,2623,2625],{"class":2624},"sqtEc","echo",[71,2627,2628],{"class":92}," \"Backup completed: backup_",[71,2630,2581],{"class":84},[71,2632,2633],{"class":92},".sql\"\n",[54,2635,2636],{"id":2636},"自动化备份",[61,2638,2640],{"className":780,"code":2639,"language":782,"meta":66,"style":66},"# .github/workflows/backup.yml\nname: Database Backup\n\non:\n  schedule:\n    - cron: '0 2 * * *'  # 每天凌晨 2 点\n\njobs:\n  backup:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Backup Database\n        run: |\n          pg_dump ${{ secrets.DATABASE_URL }} > backup_$(date +%Y%m%d).sql\n          \n      - name: Upload to S3\n        run: |\n          aws s3 cp backup_$(date +%Y%m%d).sql s3://my-backups/\n",[68,2641,2642,2647,2657,2661,2668,2675,2691,2695,2702,2709,2719,2726,2737,2747,2752,2757,2768,2776],{"__ignoreMap":66},[71,2643,2644],{"class":73,"line":74},[71,2645,2646],{"class":77},"# .github/workflows/backup.yml\n",[71,2648,2649,2652,2654],{"class":73,"line":81},[71,2650,2651],{"class":789},"name",[71,2653,275],{"class":252},[71,2655,2656],{"class":92},"Database Backup\n",[71,2658,2659],{"class":73,"line":96},[71,2660,168],{"emptyLinePlaceholder":167},[71,2662,2663,2666],{"class":73,"line":107},[71,2664,2665],{"class":1514},"on",[71,2667,807],{"class":252},[71,2669,2670,2673],{"class":73,"line":118},[71,2671,2672],{"class":789},"  schedule",[71,2674,807],{"class":252},[71,2676,2677,2680,2683,2685,2688],{"class":73,"line":129},[71,2678,2679],{"class":252},"    - ",[71,2681,2682],{"class":789},"cron",[71,2684,275],{"class":252},[71,2686,2687],{"class":92},"'0 2 * * *'",[71,2689,2690],{"class":77},"  # 每天凌晨 2 点\n",[71,2692,2693],{"class":73,"line":189},[71,2694,168],{"emptyLinePlaceholder":167},[71,2696,2697,2700],{"class":73,"line":195},[71,2698,2699],{"class":789},"jobs",[71,2701,807],{"class":252},[71,2703,2704,2707],{"class":73,"line":312},[71,2705,2706],{"class":789},"  backup",[71,2708,807],{"class":252},[71,2710,2711,2714,2716],{"class":73,"line":317},[71,2712,2713],{"class":789},"    runs-on",[71,2715,275],{"class":252},[71,2717,2718],{"class":92},"ubuntu-latest\n",[71,2720,2721,2724],{"class":73,"line":329},[71,2722,2723],{"class":789},"    steps",[71,2725,807],{"class":252},[71,2727,2728,2730,2732,2734],{"class":73,"line":340},[71,2729,837],{"class":252},[71,2731,2651],{"class":789},[71,2733,275],{"class":252},[71,2735,2736],{"class":92},"Backup Database\n",[71,2738,2739,2742,2744],{"class":73,"line":346},[71,2740,2741],{"class":789},"        run",[71,2743,275],{"class":252},[71,2745,2746],{"class":1466},"|\n",[71,2748,2749],{"class":73,"line":351},[71,2750,2751],{"class":92},"          pg_dump ${{ secrets.DATABASE_URL }} > backup_$(date +%Y%m%d).sql\n",[71,2753,2754],{"class":73,"line":363},[71,2755,2756],{"class":92},"          \n",[71,2758,2759,2761,2763,2765],{"class":73,"line":373},[71,2760,837],{"class":252},[71,2762,2651],{"class":789},[71,2764,275],{"class":252},[71,2766,2767],{"class":92},"Upload to S3\n",[71,2769,2770,2772,2774],{"class":73,"line":378},[71,2771,2741],{"class":789},[71,2773,275],{"class":252},[71,2775,2746],{"class":1466},[71,2777,2778],{"class":73,"line":383},[71,2779,2780],{"class":92},"          aws s3 cp backup_$(date +%Y%m%d).sql s3://my-backups/\n",[50,2782,2784],{"id":2783},"cicd-流水线","CI/CD 流水线",[54,2786,2788],{"id":2787},"github-actions","GitHub Actions",[61,2790,2792],{"className":780,"code":2791,"language":782,"meta":66,"style":66},"# .github/workflows/deploy.yml\nname: Deploy to Production\n\non:\n  push:\n    branches: [main]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      \n      - name: Setup Node.js\n        uses: actions/setup-node@v3\n        with:\n          node-version: '18'\n          cache: 'npm'\n          \n      - name: Install dependencies\n        run: npm ci\n        \n      - name: Run tests\n        run: npm test\n        \n      - name: Type check\n        run: npm run typecheck\n\n  deploy:\n    needs: test\n    runs-on: ubuntu-latest\n    if: github.ref == 'refs/heads/main'\n    \n    steps:\n      - uses: actions/checkout@v3\n      \n      - name: Setup Node.js\n        uses: actions/setup-node@v3\n        with:\n          node-version: '18'\n          cache: 'npm'\n          \n      - name: Install dependencies\n        run: npm ci\n        \n      - name: Build application\n        run: npm run build\n        env:\n          NUXT_PUBLIC_SITE_URL: ${{ secrets.SITE_URL }}\n          NUXT_PUBLIC_API_BASE: ${{ secrets.API_BASE }}\n          \n      - name: Deploy to Vercel\n        uses: amondnet/vercel-action@v20\n        with:\n          vercel-token: ${{ secrets.VERCEL_TOKEN }}\n          vercel-org-id: ${{ secrets.ORG_ID }}\n          vercel-project-id: ${{ secrets.PROJECT_ID }}\n          vercel-args: '--prod'\n",[68,2793,2794,2799,2808,2812,2818,2825,2838,2842,2848,2855,2863,2869,2881,2885,2896,2906,2913,2923,2933,2937,2948,2956,2961,2972,2981,2985,2996,3005,3009,3016,3026,3034,3044,3048,3054,3064,3069,3080,3089,3096,3105,3114,3119,3130,3139,3144,3156,3166,3174,3185,3196,3201,3213,3223,3230,3241,3252,3263],{"__ignoreMap":66},[71,2795,2796],{"class":73,"line":74},[71,2797,2798],{"class":77},"# .github/workflows/deploy.yml\n",[71,2800,2801,2803,2805],{"class":73,"line":81},[71,2802,2651],{"class":789},[71,2804,275],{"class":252},[71,2806,2807],{"class":92},"Deploy to Production\n",[71,2809,2810],{"class":73,"line":96},[71,2811,168],{"emptyLinePlaceholder":167},[71,2813,2814,2816],{"class":73,"line":107},[71,2815,2665],{"class":1514},[71,2817,807],{"class":252},[71,2819,2820,2823],{"class":73,"line":118},[71,2821,2822],{"class":789},"  push",[71,2824,807],{"class":252},[71,2826,2827,2830,2833,2836],{"class":73,"line":129},[71,2828,2829],{"class":789},"    branches",[71,2831,2832],{"class":252},": [",[71,2834,2835],{"class":92},"main",[71,2837,1680],{"class":252},[71,2839,2840],{"class":73,"line":189},[71,2841,168],{"emptyLinePlaceholder":167},[71,2843,2844,2846],{"class":73,"line":195},[71,2845,2699],{"class":789},[71,2847,807],{"class":252},[71,2849,2850,2853],{"class":73,"line":312},[71,2851,2852],{"class":789},"  test",[71,2854,807],{"class":252},[71,2856,2857,2859,2861],{"class":73,"line":317},[71,2858,2713],{"class":789},[71,2860,275],{"class":252},[71,2862,2718],{"class":92},[71,2864,2865,2867],{"class":73,"line":329},[71,2866,2723],{"class":789},[71,2868,807],{"class":252},[71,2870,2871,2873,2876,2878],{"class":73,"line":340},[71,2872,837],{"class":252},[71,2874,2875],{"class":789},"uses",[71,2877,275],{"class":252},[71,2879,2880],{"class":92},"actions/checkout@v3\n",[71,2882,2883],{"class":73,"line":346},[71,2884,1539],{"class":252},[71,2886,2887,2889,2891,2893],{"class":73,"line":351},[71,2888,837],{"class":252},[71,2890,2651],{"class":789},[71,2892,275],{"class":252},[71,2894,2895],{"class":92},"Setup Node.js\n",[71,2897,2898,2901,2903],{"class":73,"line":363},[71,2899,2900],{"class":789},"        uses",[71,2902,275],{"class":252},[71,2904,2905],{"class":92},"actions/setup-node@v3\n",[71,2907,2908,2911],{"class":73,"line":373},[71,2909,2910],{"class":789},"        with",[71,2912,807],{"class":252},[71,2914,2915,2918,2920],{"class":73,"line":378},[71,2916,2917],{"class":789},"          node-version",[71,2919,275],{"class":252},[71,2921,2922],{"class":92},"'18'\n",[71,2924,2925,2928,2930],{"class":73,"line":383},[71,2926,2927],{"class":789},"          cache",[71,2929,275],{"class":252},[71,2931,2932],{"class":92},"'npm'\n",[71,2934,2935],{"class":73,"line":392},[71,2936,2756],{"class":252},[71,2938,2939,2941,2943,2945],{"class":73,"line":405},[71,2940,837],{"class":252},[71,2942,2651],{"class":789},[71,2944,275],{"class":252},[71,2946,2947],{"class":92},"Install dependencies\n",[71,2949,2950,2952,2954],{"class":73,"line":416},[71,2951,2741],{"class":789},[71,2953,275],{"class":252},[71,2955,1118],{"class":92},[71,2957,2958],{"class":73,"line":422},[71,2959,2960],{"class":252},"        \n",[71,2962,2963,2965,2967,2969],{"class":73,"line":700},[71,2964,837],{"class":252},[71,2966,2651],{"class":789},[71,2968,275],{"class":252},[71,2970,2971],{"class":92},"Run tests\n",[71,2973,2974,2976,2978],{"class":73,"line":706},[71,2975,2741],{"class":789},[71,2977,275],{"class":252},[71,2979,2980],{"class":92},"npm test\n",[71,2982,2983],{"class":73,"line":711},[71,2984,2960],{"class":252},[71,2986,2987,2989,2991,2993],{"class":73,"line":717},[71,2988,837],{"class":252},[71,2990,2651],{"class":789},[71,2992,275],{"class":252},[71,2994,2995],{"class":92},"Type check\n",[71,2997,2998,3000,3002],{"class":73,"line":723},[71,2999,2741],{"class":789},[71,3001,275],{"class":252},[71,3003,3004],{"class":92},"npm run typecheck\n",[71,3006,3007],{"class":73,"line":728},[71,3008,168],{"emptyLinePlaceholder":167},[71,3010,3011,3014],{"class":73,"line":734},[71,3012,3013],{"class":789},"  deploy",[71,3015,807],{"class":252},[71,3017,3018,3021,3023],{"class":73,"line":739},[71,3019,3020],{"class":789},"    needs",[71,3022,275],{"class":252},[71,3024,3025],{"class":92},"test\n",[71,3027,3028,3030,3032],{"class":73,"line":745},[71,3029,2713],{"class":789},[71,3031,275],{"class":252},[71,3033,2718],{"class":92},[71,3035,3036,3039,3041],{"class":73,"line":750},[71,3037,3038],{"class":789},"    if",[71,3040,275],{"class":252},[71,3042,3043],{"class":92},"github.ref == 'refs/heads/main'\n",[71,3045,3046],{"class":73,"line":756},[71,3047,1735],{"class":252},[71,3049,3050,3052],{"class":73,"line":762},[71,3051,2723],{"class":789},[71,3053,807],{"class":252},[71,3055,3056,3058,3060,3062],{"class":73,"line":767},[71,3057,837],{"class":252},[71,3059,2875],{"class":789},[71,3061,275],{"class":252},[71,3063,2880],{"class":92},[71,3065,3067],{"class":73,"line":3066},36,[71,3068,1539],{"class":252},[71,3070,3072,3074,3076,3078],{"class":73,"line":3071},37,[71,3073,837],{"class":252},[71,3075,2651],{"class":789},[71,3077,275],{"class":252},[71,3079,2895],{"class":92},[71,3081,3083,3085,3087],{"class":73,"line":3082},38,[71,3084,2900],{"class":789},[71,3086,275],{"class":252},[71,3088,2905],{"class":92},[71,3090,3092,3094],{"class":73,"line":3091},39,[71,3093,2910],{"class":789},[71,3095,807],{"class":252},[71,3097,3099,3101,3103],{"class":73,"line":3098},40,[71,3100,2917],{"class":789},[71,3102,275],{"class":252},[71,3104,2922],{"class":92},[71,3106,3108,3110,3112],{"class":73,"line":3107},41,[71,3109,2927],{"class":789},[71,3111,275],{"class":252},[71,3113,2932],{"class":92},[71,3115,3117],{"class":73,"line":3116},42,[71,3118,2756],{"class":252},[71,3120,3122,3124,3126,3128],{"class":73,"line":3121},43,[71,3123,837],{"class":252},[71,3125,2651],{"class":789},[71,3127,275],{"class":252},[71,3129,2947],{"class":92},[71,3131,3133,3135,3137],{"class":73,"line":3132},44,[71,3134,2741],{"class":789},[71,3136,275],{"class":252},[71,3138,1118],{"class":92},[71,3140,3142],{"class":73,"line":3141},45,[71,3143,2960],{"class":252},[71,3145,3147,3149,3151,3153],{"class":73,"line":3146},46,[71,3148,837],{"class":252},[71,3150,2651],{"class":789},[71,3152,275],{"class":252},[71,3154,3155],{"class":92},"Build application\n",[71,3157,3159,3161,3163],{"class":73,"line":3158},47,[71,3160,2741],{"class":789},[71,3162,275],{"class":252},[71,3164,3165],{"class":92},"npm run build\n",[71,3167,3169,3172],{"class":73,"line":3168},48,[71,3170,3171],{"class":789},"        env",[71,3173,807],{"class":252},[71,3175,3177,3180,3182],{"class":73,"line":3176},49,[71,3178,3179],{"class":789},"          NUXT_PUBLIC_SITE_URL",[71,3181,275],{"class":252},[71,3183,3184],{"class":92},"${{ secrets.SITE_URL }}\n",[71,3186,3188,3191,3193],{"class":73,"line":3187},50,[71,3189,3190],{"class":789},"          NUXT_PUBLIC_API_BASE",[71,3192,275],{"class":252},[71,3194,3195],{"class":92},"${{ secrets.API_BASE }}\n",[71,3197,3199],{"class":73,"line":3198},51,[71,3200,2756],{"class":252},[71,3202,3204,3206,3208,3210],{"class":73,"line":3203},52,[71,3205,837],{"class":252},[71,3207,2651],{"class":789},[71,3209,275],{"class":252},[71,3211,3212],{"class":92},"Deploy to Vercel\n",[71,3214,3216,3218,3220],{"class":73,"line":3215},53,[71,3217,2900],{"class":789},[71,3219,275],{"class":252},[71,3221,3222],{"class":92},"amondnet/vercel-action@v20\n",[71,3224,3226,3228],{"class":73,"line":3225},54,[71,3227,2910],{"class":789},[71,3229,807],{"class":252},[71,3231,3233,3236,3238],{"class":73,"line":3232},55,[71,3234,3235],{"class":789},"          vercel-token",[71,3237,275],{"class":252},[71,3239,3240],{"class":92},"${{ secrets.VERCEL_TOKEN }}\n",[71,3242,3244,3247,3249],{"class":73,"line":3243},56,[71,3245,3246],{"class":789},"          vercel-org-id",[71,3248,275],{"class":252},[71,3250,3251],{"class":92},"${{ secrets.ORG_ID }}\n",[71,3253,3255,3258,3260],{"class":73,"line":3254},57,[71,3256,3257],{"class":789},"          vercel-project-id",[71,3259,275],{"class":252},[71,3261,3262],{"class":92},"${{ secrets.PROJECT_ID }}\n",[71,3264,3266,3269,3271],{"class":73,"line":3265},58,[71,3267,3268],{"class":789},"          vercel-args",[71,3270,275],{"class":252},[71,3272,3273],{"class":92},"'--prod'\n",[50,3275,3276],{"id":3276},"故障排除",[54,3278,3279],{"id":3279},"常见问题",[211,3281,3283],{"id":3282},"_1-构建失败","1. 构建失败",[61,3285,3287],{"className":63,"code":3286,"language":65,"meta":66,"style":66},"# 清理缓存\nrm -rf .nuxt .output node_modules\nnpm install\nnpm run build\n",[68,3288,3289,3294,3311,3318],{"__ignoreMap":66},[71,3290,3291],{"class":73,"line":74},[71,3292,3293],{"class":77},"# 清理缓存\n",[71,3295,3296,3299,3302,3305,3308],{"class":73,"line":81},[71,3297,3298],{"class":155},"rm",[71,3300,3301],{"class":229}," -rf",[71,3303,3304],{"class":92}," .nuxt",[71,3306,3307],{"class":92}," .output",[71,3309,3310],{"class":92}," node_modules\n",[71,3312,3313,3315],{"class":73,"line":96},[71,3314,156],{"class":155},[71,3316,3317],{"class":92}," install\n",[71,3319,3320,3322,3324],{"class":73,"line":107},[71,3321,156],{"class":155},[71,3323,159],{"class":92},[71,3325,162],{"class":92},[211,3327,3329],{"id":3328},"_2-内存不足","2. 内存不足",[61,3331,3333],{"className":63,"code":3332,"language":65,"meta":66,"style":66},"# 增加 Node.js 内存限制\nNODE_OPTIONS=\"--max-old-space-size=4096\" npm run build\n",[68,3334,3335,3340],{"__ignoreMap":66},[71,3336,3337],{"class":73,"line":74},[71,3338,3339],{"class":77},"# 增加 Node.js 内存限制\n",[71,3341,3342,3345,3347,3350,3353,3355],{"class":73,"line":81},[71,3343,3344],{"class":84},"NODE_OPTIONS",[71,3346,89],{"class":88},[71,3348,3349],{"class":92},"\"--max-old-space-size=4096\"",[71,3351,3352],{"class":155}," npm",[71,3354,159],{"class":92},[71,3356,162],{"class":92},[211,3358,3360],{"id":3359},"_3-静态资源-404","3. 静态资源 404",[46,3362,3363,3364,3367,3368,3371],{},"检查 ",[68,3365,3366],{},"nuxt.config.ts"," 中的 ",[68,3369,3370],{},"app.baseURL"," 配置：",[61,3373,3375],{"className":1452,"code":3374,"language":1454,"meta":66,"style":66},"export default defineNuxtConfig({\n  app: {\n    baseURL: '/your-app/'  // 如果部署在子路径\n  }\n})\n",[68,3376,3377,3387,3393,3404,3408],{"__ignoreMap":66},[71,3378,3379,3381,3383,3385],{"class":73,"line":74},[71,3380,1467],{"class":1466},[71,3382,1470],{"class":1466},[71,3384,1473],{"class":155},[71,3386,1476],{"class":252},[71,3388,3389,3391],{"class":73,"line":81},[71,3390,1639],{"class":1481},[71,3392,1485],{"class":252},[71,3394,3395,3398,3401],{"class":73,"line":96},[71,3396,3397],{"class":1481},"    baseURL:",[71,3399,3400],{"class":92}," '/your-app/'",[71,3402,3403],{"class":77},"  // 如果部署在子路径\n",[71,3405,3406],{"class":73,"line":107},[71,3407,419],{"class":252},[71,3409,3410],{"class":73,"line":118},[71,3411,1611],{"class":252},[54,3413,3414],{"id":3414},"日志调试",[61,3416,3418],{"className":1452,"code":3417,"language":1454,"meta":66,"style":66},"// server/api/health.get.ts\nexport default defineEventHandler(() => {\n  return {\n    status: 'ok',\n    timestamp: new Date().toISOString(),\n    version: process.env.npm_package_version,\n    node: process.version,\n    memory: process.memoryUsage()\n  }\n})\n",[68,3419,3420,3425,3440,3447,3457,3478,3496,3509,3523,3527],{"__ignoreMap":66},[71,3421,3422],{"class":73,"line":74},[71,3423,3424],{"class":77},"// server/api/health.get.ts\n",[71,3426,3427,3429,3431,3434,3436,3438],{"class":73,"line":81},[71,3428,1467],{"class":1466},[71,3430,1470],{"class":1466},[71,3432,3433],{"class":155}," defineEventHandler",[71,3435,1948],{"class":252},[71,3437,1952],{"class":1951},[71,3439,1485],{"class":252},[71,3441,3442,3445],{"class":73,"line":96},[71,3443,3444],{"class":1466},"  return",[71,3446,1485],{"class":252},[71,3448,3449,3452,3455],{"class":73,"line":107},[71,3450,3451],{"class":1481},"    status:",[71,3453,3454],{"class":92}," 'ok'",[71,3456,282],{"class":252},[71,3458,3459,3462,3466,3469,3472,3475],{"class":73,"line":118},[71,3460,3461],{"class":1481},"    timestamp:",[71,3463,3465],{"class":3464},"sy0r-"," new",[71,3467,3468],{"class":155}," Date",[71,3470,3471],{"class":252},"().",[71,3473,3474],{"class":155},"toISOString",[71,3476,3477],{"class":252},"(),\n",[71,3479,3480,3483,3485,3487,3489,3491,3494],{"class":73,"line":129},[71,3481,3482],{"class":1481},"    version:",[71,3484,1903],{"class":84},[71,3486,1906],{"class":252},[71,3488,1909],{"class":84},[71,3490,1906],{"class":252},[71,3492,3493],{"class":84},"npm_package_version",[71,3495,282],{"class":252},[71,3497,3498,3501,3503,3505,3507],{"class":73,"line":189},[71,3499,3500],{"class":1481},"    node:",[71,3502,1903],{"class":84},[71,3504,1906],{"class":252},[71,3506,790],{"class":84},[71,3508,282],{"class":252},[71,3510,3511,3514,3516,3518,3521],{"class":73,"line":195},[71,3512,3513],{"class":1481},"    memory:",[71,3515,1903],{"class":84},[71,3517,1906],{"class":252},[71,3519,3520],{"class":155},"memoryUsage",[71,3522,2217],{"class":252},[71,3524,3525],{"class":73,"line":312},[71,3526,419],{"class":252},[71,3528,3529],{"class":73,"line":317},[71,3530,1611],{"class":252},[50,3532,3533],{"id":3533},"相关资源",[563,3535,3536,3545,3552,3559],{},[566,3537,3538],{},[3539,3540,3544],"a",{"href":3541,"rel":3542},"https://nuxt.com/docs/getting-started/deployment",[3543],"nofollow","Nuxt 3 部署文档",[566,3546,3547],{},[3539,3548,3551],{"href":3549,"rel":3550},"https://vercel.com/docs/frameworks/nuxt",[3543],"Vercel 部署指南",[566,3553,3554],{},[3539,3555,3558],{"href":3556,"rel":3557},"https://docs.netlify.com/frameworks/nuxt/",[3543],"Netlify 部署指南",[566,3560,3561],{},[3539,3562,3565],{"href":3563,"rel":3564},"https://docs.docker.com/develop/dev-best-practices/",[3543],"Docker 最佳实践",[3567,3568,3569],"style",{},"html pre.shiki code .sfEkN, html code.shiki .sfEkN{--shiki-light:#357B42;--shiki-light-font-style:italic;--shiki-default:#357B42;--shiki-default-font-style:italic;--shiki-dark:#6A9955;--shiki-dark-font-style:inherit}html pre.shiki code .stY2G, html code.shiki .stY2G{--shiki-light:#2F86D2;--shiki-default:#2F86D2;--shiki-dark:#9CDCFE}html pre.shiki code .s4fzq, html code.shiki .s4fzq{--shiki-light:#7B30D0;--shiki-default:#7B30D0;--shiki-dark:#D4D4D4}html pre.shiki code .s3_3W, html code.shiki .s3_3W{--shiki-light:#A44185;--shiki-default:#A44185;--shiki-dark:#CE9178}html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .sIx0X, html code.shiki .sIx0X{--shiki-light:#7EB233;--shiki-default:#7EB233;--shiki-dark:#DCDCAA}html pre.shiki code .sKHZn, html code.shiki .sKHZn{--shiki-light:#174781;--shiki-default:#174781;--shiki-dark:#CE9178}html pre.shiki code .sHMit, html code.shiki .sHMit{--shiki-light:#002339;--shiki-default:#002339;--shiki-dark:#E6E6E6}html pre.shiki code .s4h4A, html code.shiki .s4h4A{--shiki-light:#DC3EB7;--shiki-default:#DC3EB7;--shiki-dark:#9CDCFE}html pre.shiki code .sZjll, html code.shiki .sZjll{--shiki-light:#00820F;--shiki-default:#00820F;--shiki-dark:#CE9178}html pre.shiki code .skrhf, html code.shiki .skrhf{--shiki-light:#0444AC;--shiki-default:#0444AC;--shiki-dark:#569CD6}html pre.shiki code .sAbJP, html code.shiki .sAbJP{--shiki-light:#174781;--shiki-default:#174781;--shiki-dark:#B5CEA8}html pre.shiki code .s7VM3, html code.shiki .s7VM3{--shiki-light:#7B30D0;--shiki-default:#7B30D0;--shiki-dark:#C586C0}html pre.shiki code .s6DEn, html code.shiki .s6DEn{--shiki-light:#002339;--shiki-default:#002339;--shiki-dark:#9CDCFE}html pre.shiki code .sBSzB, html code.shiki .sBSzB{--shiki-light:#174781;--shiki-default:#174781;--shiki-dark:#569CD6}html pre.shiki code .sD1d_, html code.shiki .sD1d_{--shiki-light:#0991B6;--shiki-default:#0991B6;--shiki-dark:#569CD6}html pre.shiki code .sozAS, html code.shiki .sozAS{--shiki-light:#B1108E;--shiki-default:#B1108E;--shiki-dark:#9CDCFE}html pre.shiki code .sqtEc, html code.shiki .sqtEc{--shiki-light:#1AB394;--shiki-default:#1AB394;--shiki-dark:#DCDCAA}html pre.shiki code .sy0r-, html code.shiki .sy0r-{--shiki-light:#7B30D0;--shiki-default:#7B30D0;--shiki-dark:#569CD6}",{"title":66,"searchDepth":81,"depth":81,"links":3571},[3572,3576,3582,3586,3590,3594,3598,3601,3605],{"id":52,"depth":81,"text":52,"children":3573},[3574,3575],{"id":56,"depth":96,"text":56},{"id":140,"depth":96,"text":140},{"id":205,"depth":81,"text":205,"children":3577},[3578,3579,3580,3581],{"id":208,"depth":96,"text":209},{"id":464,"depth":96,"text":465},{"id":580,"depth":96,"text":581},{"id":1058,"depth":96,"text":1059},{"id":1442,"depth":81,"text":1442,"children":3583},[3584,3585],{"id":1445,"depth":96,"text":1445},{"id":1691,"depth":96,"text":1691},{"id":1831,"depth":81,"text":1831,"children":3587},[3588,3589],{"id":1834,"depth":96,"text":1834},{"id":2146,"depth":96,"text":2146},{"id":2304,"depth":81,"text":2304,"children":3591},[3592,3593],{"id":2307,"depth":96,"text":2308},{"id":2437,"depth":96,"text":2437},{"id":2493,"depth":81,"text":2493,"children":3595},[3596,3597],{"id":2496,"depth":96,"text":2496},{"id":2636,"depth":96,"text":2636},{"id":2783,"depth":81,"text":2784,"children":3599},[3600],{"id":2787,"depth":96,"text":2788},{"id":3276,"depth":81,"text":3276,"children":3602},[3603,3604],{"id":3279,"depth":96,"text":3279},{"id":3414,"depth":96,"text":3414},{"id":3533,"depth":81,"text":3533},"详细的生产环境部署和配置指南","md",{"date":3609,"updated":3609},"2025-06-05",{"title":21,"description":3606},"Bhif2GqVl-4RP7_X77Woa3KnrJFCLBPLtnW4HltIqGk",[3613,3614],{"title":17,"path":18,"stem":19,"children":-1},{"title":25,"path":26,"stem":27,"children":-1},1749397104398]